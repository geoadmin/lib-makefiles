include ./docker.mk
SHELL:=/bin/bash
VENV:=.venv
MAKO_CMD:=${VENV}/bin/mako-render
PROJECT_NAME:=sample_project_base_name

test:
	$(call fct)

help:
	$(call dockerhelp)


docker-buid-%:
	$(call dockerbuild,$*,${MAKO_CMD},${PROJECT_NAME})

docker-run-%:
	$(call dockerrun,$*,${MAKO_CMD},${PROJECT_NAME})

docker-purge:
	$(call dockerpurge,${PROJECT_NAME})

docker-push-%:
	$(call dockerpush,${PROJECT_NAME},$*)

docker-deploy-%:
	$(call dockerdeploy,$*,${MAKO_CMD},${PROJECT_NAME})

define fct
	for line in $(shell sudo docker images --format "{{.Repository}}:{{.Tag}}" | grep "swisstopo"); do \
		echo "$$line" ;\
	done; 
endef



